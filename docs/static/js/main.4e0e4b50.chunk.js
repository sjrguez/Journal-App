(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{167:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(34),c=n.n(r),s=(n(74),n(12)),o=n.n(s),i=n(17),u=n(23),l=n(10),d=n(25),j=n(13),p=n(6),b=n(32);n(82),n(83);b.a.initializeApp({apiKey:"AIzaSyBpAdTAjCxKD3rdz8pmEW0sxDRm8e6YfdY",authDomain:"react-app-6e736.firebaseapp.com",projectId:"react-app-6e736",storageBucket:"react-app-6e736.appspot.com",messagingSenderId:"638793712598",appId:"1:638793712598:web:db11797e4c108b9b7fda77"});var m=b.a.firestore(),f=new b.a.auth.GoogleAuthProvider,h=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.collection("".concat(t,"/journal/notes")).get();case 3:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(p.a)(Object(p.a)({},e.data()),{},{id:e.id}))})),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O="[Auth] Login",x="[Auth] Logout",v="[UI] Set Error",g="[UI] Remove Error",_="[UI] Start loading",y="[UI] Finish loading",w="[Notes] New note",N="[Notes] Set active note",k="[Notes] Load note",E="[Notes] Update note saved",C="[Notes] Delete note",S="[Notes] Logout Cleaning",A=n(21),I=n.n(A),D=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/drzpn3owg/upload",e.prev=1,(n=new FormData).append("upload_preset","react-journal"),n.append("file",t),e.next=7,fetch("https://api.cloudinary.com/v1_1/drzpn3owg/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=16;break}return e.next=11,a.json();case 11:return r=e.sent,console.log(r),e.abrupt("return",r.secure_url);case 16:return e.next=18,a.json();case 18:throw e.sent;case 19:e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(1),console.log(e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){return{type:N,payload:Object(p.a)({id:e},t)}},P=function(e,t){return{type:w,payload:Object(p.a)({id:e},t)}},U=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:a=t.sent,n(z(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return{type:k,payload:e}},Y=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n,a){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.uid,delete(c=Object(p.a)({},e)).id,e.url||delete e.url,t.prev=4,t.next=7,m.doc("".concat(r,"/journal/notes/").concat(e.id)).update(c);case 7:I.a.fire("Saved",e.title,"success"),n(B(e)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),I.a.fire("Error",t.t0.message,"error");case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}()},B=function(e){return{type:E,payload:Object(p.a)({},e)}},M=function(e){return{type:C,payload:e}},T=n(36),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},o=function(e){var t=e.target;c(Object(p.a)(Object(p.a)({},r),{},Object(T.a)({},t.name,t.value)))};return[r,o,s]},F=n(37),R=n.n(F),q=n(2),G=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.notes})).active,n=R()(t.date);return Object(q.jsxs)("div",{className:"notes_appbar",children:[Object(q.jsx)("span",{children:n.format("MMMM Do YYYY")}),Object(q.jsx)("input",{type:"file",name:"file",style:{display:"none"},onChange:function(t){var n=t.target;console.log({file:n.files});var a=n.files[0];a&&e(function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n,a){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,onBeforeOpen:function(){I.a.showLoading()},showConfirmButton:!1}),r=a().notes.active,t.prev=2,t.next=5,D(e);case 5:c=t.sent,r.url=c,n(Y(r)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.prev=12,I.a.close(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,10,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()}(a))},id:"fileSelector"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(q.jsx)("button",{className:"btn",onClick:function(){e(Y(t))},children:"Save"})]})]})},J=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.notes})).active,n=W(t),r=Object(u.a)(n,3),c=r[0],s=r[1],l=r[2],d=c.body,b=c.title,f=Object(a.useRef)(t.id);Object(a.useEffect)((function(){f.current!==t.id&&(l(t),f.current=t.id)}),[t,l]),Object(a.useEffect)((function(){e(L(c.id,Object(p.a)({},c)))}),[c,e]);return Object(q.jsxs)("div",{className:"notes__main-content",children:[Object(q.jsx)(G,{}),Object(q.jsxs)("div",{className:"notes__content",children:[Object(q.jsx)("input",{type:"text",placeholder:"Some awesome title",className:"notes_title-input",name:"title",value:b,onChange:s}),Object(q.jsx)("textarea",{placeholder:"What happened today",className:"notes__textarea",name:"body",value:d,onChange:s}),t.url&&Object(q.jsx)("div",{className:"notes_image",children:Object(q.jsx)("img",{src:t.url,alt:b})})]}),f.current&&Object(q.jsx)("button",{className:"btn btn-danger",onClick:function(){var t;e((t=f.current,function(){var e=Object(i.a)(o.a.mark((function e(n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().auth.uid,e.prev=1,e.next=4,m.doc("".concat(r,"/journal/notes/").concat(t)).delete();case 4:n(M(t)),I.a.fire({title:"Deleted!",icon:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()))},children:"Eliminar nota"})]})},K=function(){return Object(q.jsxs)("div",{className:"nothing__main-content",children:[Object(q.jsxs)("p",{children:["Select something",Object(q.jsx)("br",{}),"or Create an entry!!"]}),Object(q.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},X=function(e){return{type:v,payload:e}},V=function(e,t){return function(n){n({type:_}),b.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(H(t.uid,t.displayName))})).catch((function(e){I.a.fire("Error",e.message,"error")})).finally((function(){n({type:y})}))}},H=function(e,t){return{type:O,payload:{uid:e,displayName:t}}},Q=function(){return{type:x}},Z=function(e){var t=R()(e.date),n=Object(j.b)();return Object(q.jsxs)("div",{className:"journal__entry pointer animate__animated animate__slideInLeft animate__faster",onClick:function(){n(L(e.id,e))},children:[e.url&&Object(q.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(e.url,")")}}),Object(q.jsxs)("div",{className:"journal__entry-body",children:[Object(q.jsx)("p",{className:"journal__entry-tittle",children:e.title}),Object(q.jsx)("p",{className:"journal__entry-content",children:e.body})]}),Object(q.jsxs)("div",{className:"journal__entry-date-box",children:[Object(q.jsx)("span",{children:t.format("dddd")}),Object(q.jsx)("h4",{children:t.format("Do")})]})]})},$=function(){var e=Object(j.c)((function(e){return e.notes})).notes;return Object(q.jsx)("div",{className:"journal_entries",children:e.map((function(e){return Object(q.jsx)(Z,Object(p.a)({},e),e.id)}))})},ee=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth})).name;return Object(q.jsxs)("aside",{className:"journal__sidebar",children:[Object(q.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object(q.jsxs)("h3",{className:"mt-5",children:[Object(q.jsx)("i",{className:"far fa-moon"}),Object(q.jsxs)("span",{children:["  ",t," "]})]}),Object(q.jsx)("button",{className:"btn",onClick:function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.auth().signOut();case 3:t(Q()),t({type:S}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I.a.fire("Error",e.t0.message,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(q.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,r={title:"",body:"",date:(new Date).getTime()},e.next=4,m.collection("".concat(a,"/journal/notes")).add(r);case 4:c=e.sent,t(L(c.id,r)),t(P(c.id,r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),console.log("works!!!!!!!!!")},children:[Object(q.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(q.jsx)("p",{className:"mt-5",children:"new Entry"})]}),Object(q.jsx)($,{})]})},te=function(){var e=Object(j.c)((function(e){return e.notes})).active;return Object(q.jsxs)("div",{className:"journal__main_content animate__animated animate__fadeIn animate__faster",children:[Object(q.jsx)(ee,{}),Object(q.jsx)("main",{children:e?Object(q.jsx)(J,{}):Object(q.jsx)(K,{})})]})},ne=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.ui})),n=W({email:"rando@gmail.com",password:"123456"}),a=Object(u.a)(n,2),r=a[0],c=a[1],s=r.email,l=r.password;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h3",{className:"auth__title",children:" Login "}),Object(q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(V(s,l))},className:"animate__animated animate__fadeIn animate__faster",children:[Object(q.jsx)("input",{type:"text",className:"auth__input",placeholder:"Email",name:"email",autoComplete:"off",value:s,onChange:c}),Object(q.jsx)("input",{type:"password",className:"auth__input",placeholder:"Password",name:"password",value:l,onChange:c}),Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:t.loading,children:"Log in"}),Object(q.jsxs)("div",{className:"auth__social-networks",children:[Object(q.jsx)("p",{children:"Login with social networks"}),Object(q.jsxs)("div",{onClick:function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.auth().signInWithPopup(f);case 3:n=e.sent,a=n.user,t(H(a.uid,a.displayName)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),I.a.fire("Error",e.t0.message,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},className:"google-btn",children:[Object(q.jsx)("div",{className:"google-icon-wrapper",children:Object(q.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(q.jsx)("p",{className:"btn-text ",children:Object(q.jsx)("b",{children:"Sign in with google"})})]})]}),Object(q.jsx)(d.b,{className:"link",to:"/auth/register",children:"Create new account"})]})]})},ae=n(68),re=n.n(ae),ce=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.ui}));console.log(t);var n=W({email:"rando@gmail.com",name:"starlinD",password:"1234",password2:"1234"}),a=Object(u.a)(n,2),r=a[0],c=a[1],s=r.email,l=r.password,p=r.name,m=r.password2,f=function(){return 0===p.trim().length?(e(X("Name is required")),console.log("Name is required"),!1):re.a.isEmail(s)?l!==m||l.length<5?(e(X("Password should be at least 6 characters and match")),console.log("Password should be at least 6 characters and match"),!1):(e({type:g}),!0):(e(X("Email is not valid")),console.log("Email is not valid"),!1)};return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h3",{className:"auth__title",children:" Login "}),Object(q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f()&&(console.log({email:s,password:l,name:p,password2:m}),e(function(e,t,n){return function(a){b.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,e.next=3,r.updateProfile({displayName:n});case 3:a(H(r.uid,r.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){I.a.fire("Error",e.message,"error")}))}}(s,l,p)))},className:"animate__animated animate__fadeIn animate__faster",children:[t.msgError&&Object(q.jsx)("div",{className:"auth__alert-error",children:t.msgError}),Object(q.jsx)("input",{type:"text",className:"auth__input",placeholder:"Name",name:"name",autoComplete:"off",value:p,onChange:c}),Object(q.jsx)("input",{type:"text",className:"auth__input",placeholder:"Email",name:"email",autoComplete:"off",value:s,onChange:c}),Object(q.jsx)("input",{type:"password",className:"auth__input",placeholder:"Password",name:"password",value:l,onChange:c}),Object(q.jsx)("input",{type:"password",className:"auth__input",placeholder:"Confirm password",name:"password2",value:m,onChange:c}),Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mb-1",children:"Log in"}),Object(q.jsx)(d.b,{className:"link",to:"/auth/login",children:"Already registered"})]})]})},se=function(){return Object(q.jsx)("div",{className:"auth__main",children:Object(q.jsx)("div",{className:"auth__box-container",children:Object(q.jsxs)(l.d,{children:[Object(q.jsx)(l.b,{exact:!0,path:"/auth/login",component:ne}),Object(q.jsx)(l.b,{exact:!0,path:"/auth/register",component:ce}),Object(q.jsx)(l.a,{to:"/auth/login"})]})})})},oe=n(38),ie=function(e){var t=e.isAuthenticated,n=e.component,a=Object(oe.a)(e,["isAuthenticated","component"]);return Object(q.jsx)(l.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(q.jsx)(n,Object(p.a)({},e)):Object(q.jsx)(l.a,{to:"/auth/login"})}}))},ue=function(e){var t=e.isAuthenticated,n=e.component,a=Object(oe.a)(e,["isAuthenticated","component"]);return Object(q.jsx)(l.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(q.jsx)(l.a,{to:"/"}):Object(q.jsx)(n,Object(p.a)({},e))}}))},le=function(){var e=Object(j.b)(),t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),p=Object(u.a)(s,2),m=p[0],f=p[1];return Object(a.useEffect)((function(){b.a.auth().onAuthStateChanged(function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(H(n.uid,n.displayName)),f(!0),e(U(n.uid))):f(!1),l.a,c(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,m]),r?Object(q.jsxs)("h1",{children:[" ",Object(q.jsx)("i",{className:"fas fa-cog fa-spin "}),"Por favor espere..."]}):Object(q.jsx)(d.a,{children:Object(q.jsx)("div",{children:Object(q.jsxs)(l.d,{children:[Object(q.jsx)(ue,{path:"/auth",component:se,isAuthenticated:m}),Object(q.jsx)(ie,{path:"/",exact:!0,component:te,isAuthenticated:m}),Object(q.jsx)(l.a,{to:"/auth/login"})]})})})},de=n(26),je=n(69),pe=n(47),be={notes:[],active:null},me={loading:!1,msgError:null},fe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.d,he=Object(de.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{uid:t.payload.uid,name:t.payload.displayName};case x:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(p.a)(Object(p.a)({},e),{},{msgError:t.payload});case g:return Object(p.a)(Object(p.a)({},e),{},{msgError:null});case _:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case y:return Object(p.a)(Object(p.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case N:return Object(p.a)(Object(p.a)({},e),{},{active:Object(p.a)({},n)});case w:return Object(p.a)(Object(p.a)({},e),{},{notes:[t.payload].concat(Object(pe.a)(e.notes))});case k:return Object(p.a)(Object(p.a)({},e),{},{notes:Object(pe.a)(n)});case E:return console.log(n),Object(p.a)(Object(p.a)({},e),{},{notes:e.notes.map((function(e){return e.id===n?n:e}))});case C:return Object(p.a)(Object(p.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!=n}))});case S:return Object(p.a)(Object(p.a)({},e),{},{notes:[],active:null});default:return e}}}),Oe=Object(de.e)(he,fe(Object(de.a)(je.a))),xe=function(){return Object(q.jsx)(j.a,{store:Oe,children:Object(q.jsx)(le,{})})};c.a.render(Object(q.jsx)(xe,{}),document.getElementById("root"))},74:function(e,t,n){}},[[167,1,2]]]);
//# sourceMappingURL=main.4e0e4b50.chunk.js.map